<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>SOCIAL BOOSTE HORIZON</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* ========== Styles généraux ========== */
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f4f4f4; color:#333; }
    header { background:#047aed; color:#fff; padding:20px; position:relative;
      display:flex; align-items:center; justify-content:center; flex-wrap: wrap; }
    header .logo img { height:50px; margin-right:15px; }
    header h1 { margin:0; font-size:1.8rem; }
    #site-search { margin-top:15px; width:80%; max-width:300px; padding:8px; border-radius:4px; border:none; }
    section { padding:20px; max-width:1000px; margin:20px auto; background:#fff; border-radius:8px; }
    h2 { color:#047aed; border-bottom:2px solid #047aed; padding-bottom:5px; }
    .btn { display:inline-block; margin-top:10px; background:#25D366; color:#fff; padding:10px 15px; text-decoration:none; border-radius:5px; font-weight:bold; }
    .btn-secondary { background:#ffc107; color:#222; margin-left:10px; }
    .form-container input, .form-container select, .form-container button {
      width:100%; padding:10px; margin:8px 0; border-radius:4px; border:1px solid #ccc;
    }
    .form-container .btn-form { background:#047aed; color:#fff; border:none; cursor:pointer; }
    .banner img { width:100%; height:60vh; object-fit:cover; display:block; }
    .testimonial img { width:100%; max-width:800px; margin:30px auto; display:block; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    footer { background:#222; color:#fff; text-align:center; padding:20px; }
    footer a { color:#00ffcc; text-decoration:none; margin:0 10px; }

    /* ========== Menu hamburger ========== */
    .hamburger-btn { background:none; border:none; cursor:pointer;
      display:flex; flex-direction:column; gap:4px; position:absolute; left:20px; top:20px; }
    .hamburger-btn span { width:25px; height:3px; background:#fff; border-radius:2px; }
    .nav-menu { display:none; background:#047aed; position:absolute; top:70px; right:0; width:200px; border-radius:0 0 5px 5px; z-index:1000; }
    .nav-menu ul { list-style:none; margin:0; padding:0; }
    .nav-menu li { border-bottom:1px solid rgba(255,255,255,0.2); }
    .nav-menu li:last-child { border-bottom:none; }
    .nav-menu a { display:block; padding:10px 15px; color:#fff; text-decoration:none; font-weight:bold; }
    .nav-menu a:hover { background:rgba(255,255,255,0.2); }
    @media(min-width:768px){
      .hamburger-btn { display:none; }
      .nav-menu { display:block; position:static; width:auto; background:transparent; }
      .nav-menu ul { display:flex; gap:15px; }
      .nav-menu a { padding:0; }
    }

    /* ========== Commandes & Estimations ========== */
    .custom-order { display:none; margin-top:15px; padding:15px; border:1px solid #ddd; border-radius:5px; background:#fafafa; }
    .custom-order label { display:block; margin:8px 0; }
    .custom-order input, .custom-order select, .custom-order textarea { width:100%; padding:5px; border:1px solid #ccc; border-radius:4px; }
    .custom-order .co-send, .custom-order .co-send-fb { margin-top:10px; background:#25D366; color:#fff; padding:8px 12px; border:none; border-radius:5px; font-weight:bold; cursor:pointer; }
    .price-estimate-fb { margin-top:10px; font-weight:bold; color:#047aed; }

    /* ========== Tarifs ========== */
    #tarifs .tarif-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:20px; }
    .tarif-section { padding:15px; border:1px solid #ddd; border-radius:5px; background:#fff; }
    .tarif-section h3 { color:#047aed; margin-bottom:10px; }
    .tarif-section table { width:100%; border-collapse:collapse; }
    .tarif-section th, .tarif-section td { border:1px solid #ddd; padding:8px; text-align:center; }
    .tarif-section th { background:#f4f4f4; }

    /* ========== Profil & Commandes ========== */
    #profile-page, #orders-page { display:none; max-width:800px; margin:20px auto; background:#fff; padding:20px; border:1px solid #ddd; border-radius:8px; }
    #profile-page img { display:block; margin:0 auto 20px; border-radius:50%; width:120px; height:120px; object-fit:cover; background:#eee; }
    #profile-page .info { margin-bottom:10px; }
    #profile-page .info span:first-child { font-weight:bold; }
    #profile-page .edit-form { display:none; margin-top:20px; }
    #profile-page .edit-form label { display:block; margin:8px 0; }
    #profile-page .edit-form input { width:100%; padding:8px; border:1px solid #ccc; border-radius:4px; }

    #orders-page table { width:100%; border-collapse:collapse; }
    #orders-page th, #orders-page td { border:1px solid #ddd; padding:8px; text-align:left; }
    #orders-page th { background:#f4f4f4; }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header id="top">
    <div class="logo">
      <img src="img/IMG/39AE1E0B-E163-4DC8-8A83-FF931C7D8BF3.jpeg" alt="Logo Social Boost Horizon">
    </div>
    <h1>SOCIAL BOOSTE HORIZON</h1>
    <input id="site-search" type="text" placeholder="Rechercher...">
    <button id="hamburger-btn" class="hamburger-btn" aria-label="Menu">
      <span></span><span></span><span></span>
    </button>
  </header>

  <!-- MENU HAMBURGER -->
  <nav id="nav-menu" class="nav-menu">
    <ul>
      <li><a href="#top" onclick="scrollToTop()">Accueil</a></li>
      <li><a href="#" onclick="openProfile();closeMenu()">Mon profil</a></li>
      <li><a href="#" onclick="openOrders();closeMenu()">Mes commandes</a></li>
      <li><a href="#a-propos" onclick="closeMenu()">À propos</a></li>
      <li><a href="#" onclick="alert('Assistance via WhatsApp');closeMenu()">Assistance</a></li>
    </ul>
  </nav>

  <!-- BANNIÈRE -->
  <div class="banner">
    <img src="img/IMG/FE46B6BE-0C90-4D5B-8932-3C22932C3C21.jpeg" alt="Bannière Social Boost Horizon">
  </div>

  <!-- PRÉSENTATION -->
  <section id="presentation">
    <h2>Présentation</h2>
    <p>Bienvenue chez <strong>Social Boost Horizon</strong>, votre partenaire de confiance pour développer votre présence en ligne sur toutes les plateformes sociales.</p>
  </section>

  <!-- SERVICES DÉTAILLÉS -->
  <!-- 1. Boostage Facebook -->
  <section class="service" data-service="facebook">
    <h2>1. Boostage sur Facebook</h2>
    <p>Boostez votre page Facebook : followers, likes, vues, partages et commentaires, le tout garanti à faible coût.</p>
    <a class="btn" href="https://wa.me/237699853665?text=Je%20veux%201000%20followers%20Facebook" target="_blank">Commander via WhatsApp</a>
    <button class="btn btn-secondary toggle-form">Personnaliser la commande</button>
    <div class="custom-order">
      <label>Service :
        <select class="co-service-fb">
          <option>Followers</option>
          <option>Likes/Vues</option>
          <option>J’aime page</option>
          <option>Commentaires</option>
          <option>Partages</option>
          <option>Membres groupe</option>
        </select>
      </label>
      <label>Quantité : <input type="number" class="co-quantity-fb" placeholder="1000"></label>
      <p class="price-estimate-fb"></p>
      <button class="co-send-fb">Acheter</button>
    </div>
  </section>

  <!-- 2. Création TikTok -->
  <section class="service" data-service="tiktok">
    <h2>2. Création de compte TikTok</h2>
    <p>Nous créons et optimisons votre compte TikTok professionnel pour un démarrage en fanfare.</p>
    <button class="btn btn-secondary toggle-form">Remplir le formulaire</button>
    <div class="custom-order">
      <label>Prénom : <input type="text" class="co-firstname"></label>
      <label>Nom : <input type="text" class="co-lastname"></label>
      <label>Date de naissance : <input type="date" class="co-dob"></label>
      <label>Nom de compte : <input type="text" class="co-account"></label>
      <label>E‑mail : <input type="email" class="co-email"></label>
      <label>Téléphone : <input type="tel" class="co-phone"></label>
      <label>Pays : <input type="text" class="co-country"></label>
      <button class="co-send">Acheter</button>
    </div>
  </section>

  <!-- 3. Création Page Facebook pro -->
  <section class="service" data-service="fbpage">
    <h2>3. Création de pages Facebook pro</h2>
    <p>Page pro complète avec logo, description et réglages de confidentialité personnalisés.</p>
    <button class="btn btn-secondary toggle-form">Remplir le formulaire</button>
    <div class="custom-order">
      <label>Prénom : <input type="text" class="co-firstname"></label>
      <label>Nom : <input type="text" class="co-lastname"></label>
      <label>Date de naissance : <input type="date" class="co-dob"></label>
      <label>Nom de page : <input type="text" class="co-account"></label>
      <label>E‑mail : <input type="email" class="co-email"></label>
      <label>Téléphone : <input type="tel" class="co-phone"></label>
      <label>Pays : <input type="text" class="co-country"></label>
      <button class="co-send">Acheter</button>
    </div>
  </section>

  <!-- 4. Chanson personnalisée -->
  <section class="service" data-service="chanson">
    <h2>4. Chanson personnalisée</h2>
    <p>Un compositeur professionnel crée une chanson unique selon vos instructions.</p>
    <button class="btn btn-secondary toggle-form">Remplir le formulaire</button>
    <div class="custom-order">
      <label>Instructions :<textarea class="co-text" rows="4"></textarea></label>
      <button class="co-send">Acheter</button>
    </div>
  </section>

  <!-- 5. Développement de sites web -->
  <section class="service" data-service="site">
    <h2>5. Développement de sites web</h2>
    <p>Vitrine, e‑commerce ou sur mesure : nous réalisons votre site responsive et SEO-friendly.</p>
    <button class="btn btn-secondary toggle-form">Remplir le formulaire</button>
    <div class="custom-order">
      <label>Nom du site : <input type="text" class="co-text"></label>
      <label>Objectif : <input type="text" class="co-text"></label>
      <label>Description :<textarea class="co-text" rows="3"></textarea></label>
      <label>Compléments :<textarea class="co-text" rows="2"></textarea></label>
      <button class="co-send">Acheter</button>
    </div>
  </section>

  <!-- 6. Création d’applications mobiles -->
  <section class="service" data-service="app">
    <h2>6. Création d’applications mobiles</h2>
    <p>iOS, Android ou multiplateforme : développez votre application sur mesure.</p>
    <button class="btn btn-secondary toggle-form">Remplir le formulaire</button>
    <div class="custom-order">
      <label>Nom : <input type="text" class="co-text"></label>
      <label>Objectif : <input type="text" class="co-text"></label>
      <label>Description :<textarea class="co-text" rows="3"></textarea></label>
      <label>Compléments :<textarea class="co-text" rows="2"></textarea></label>
      <button class="co-send">Acheter</button>
    </div>
  </section>

  <!-- 7. Création de logos & flyers -->
  <section class="service" data-service="logo">
    <h2>7. Création de logos & flyers</h2>
    <p>Identité visuelle complète : logo, flyers, cartes et bannières.</p>
    <button class="btn btn-secondary toggle-form">Remplir le formulaire</button>
    <div class="custom-order">
      <label>Marque : <input type="text" class="co-text"></label>
      <label>Objectif : <input type="text" class="co-text"></label>
      <label>Description :<textarea class="co-text" rows="3"></textarea></label>
      <label>Compléments :<textarea class="co-text" rows="2"></textarea></label>
      <button class="co-send">Acheter</button>
    </div>
  </section>

  <!-- 8. VPN -->
  <section class="service" data-service="vpn">
    <h2>8. VPN</h2>
    <p>Connexion sécurisée et anonyme : illimitée ou limitée, selon votre pack.</p>
    <button class="btn btn-secondary toggle-form">Remplir le formulaire</button>
    <div class="custom-order">
      <label>Type : <select class="co-type"><option>Illimité</option><option>Limité</option></select></label>
      <label>Quantité (Mo) : <input type="number" class="co-quantity"></label>
      <label>Durée (jours) : <input type="number" class="co-days"></label>
      <button class="co-send">Acheter</button>
    </div>
  </section>

  <!-- TARIFS DÉTAILLÉS -->
  <section id="tarifs">
    <h2>Tarifs détaillés</h2>
    <div class="tarif-grid">
      <!-- Facebook -->
      <div class="tarif-section">
        <h3>Facebook</h3>
        <table>
          <thead><tr><th>Service</th><th>Quantité</th><th>Prix (FCFA)</th></tr></thead>
          <tbody>
            <tr><td>Followers</td><td>1 000</td><td>2 100</td></tr>
            <tr><td>Followers</td><td>5 000</td><td>9 500</td></tr>
            <tr><td>Followers</td><td>10 000</td><td>19 200</td></tr>
            <tr><td>Likes/Vues</td><td>1 000</td><td>1 500</td></tr>
            <tr><td>Likes/Vues</td><td>5 000</td><td>6 500</td></tr>
            <tr><td>Likes/Vues</td><td>10 000</td><td>11 500</td></tr>
            <tr><td>J’aime page</td><td>1 000</td><td>2 800</td></tr>
            <tr><td>J’aime page</td><td>5 000</td><td>7 000</td></tr>
            <tr><td>J’aime page</td><td>10 000</td><td>11 000</td></tr>
            <tr><td>Commentaires</td><td>10</td><td>850</td></tr>
            <tr><td>Partages</td><td>1 000</td><td>800</td></tr>
            <tr><td>Partages</td><td>5 000</td><td>4 000</td></tr>
            <tr><td>Partages</td><td>10 000</td><td>9 000</td></tr>
            <tr><td>Membres groupe</td><td>1 000</td><td>2 000</td></tr>
            <tr><td>Membres groupe</td><td>5 000</td><td>9 000</td></tr>
          </tbody>
        </table>
      </div>
      <!-- TikTok -->
      <div class="tarif-section">
        <h3>TikTok</h3>
        <table>
          <thead><tr><th>Service</th><th>Quantité</th><th>Prix (FCFA)</th></tr></thead>
          <tbody>
            <tr><td>Abonnés</td><td>1 000</td><td>2 500</td></tr>
            <tr><td>Abonnés</td><td>2 000</td><td>5 000</td></tr>
            <tr><td>Abonnés</td><td>5 000</td><td>9 500</td></tr>
            <tr><td>Abonnés</td><td>10 000</td><td>19 500</td></tr>
            <tr><td>Likes vidéo</td><td>1 000</td><td>1 000</td></tr>
            <tr><td>Likes vidéo</td><td>5 000</td><td>4 500</td></tr>
            <tr><td>Likes vidéo</td><td>10 000</td><td>8 000</td></tr>
            <tr><td>Vues vidéo</td><td>1 000</td><td>800</td></tr>
            <tr><td>Vues vidéo</td><td>5 000</td><td>3 500</td></tr>
            <tr><td>Vues vidéo</td><td>10 000</td><td>5 000</td></tr>
            <tr><td>Sauvegardes/Partages</td><td>1 000</td><td>500</td></tr>
            <tr><td>Sauvegardes/Partages</td><td>5 000</td><td>2 000</td></tr>
            <tr><td>Sauvegardes/Partages</td><td>10 000</td><td>3 500</td></tr>
            <tr><td>Commentaires</td><td>10</td><td>500</td></tr>
            <tr><td>Commentaires</td><td>1 000</td><td>5 000</td></tr>
          </tbody>
        </table>
      </div>
      <!-- Instagram -->
      <div class="tarif-section">
        <h3>Instagram</h3>
        <table>
          <thead><tr><th>Service</th><th>Quantité</th><th>Prix (FCFA)</th></tr></thead>
          <tbody>
            <tr><td>Abonnés</td><td>1 000</td><td>2 500</td></tr>
            <tr><td>Abonnés</td><td>2 000</td><td>5 000</td></tr>
            <tr><td>Abonnés</td><td>5 000</td><td>9 500</td></tr>
            <tr><td>Abonnés</td><td>10 000</td><td>19 500</td></tr>
            <tr><td>Likes vidéo</td><td>1 000</td><td>1 000</td></tr>
            <tr><td>Likes vidéo</td><td>5 000</td><td>4 500</td></tr>
            <tr><td>Likes vidéo</td><td>10 000</td><td>8 000</td></tr>
            <tr><td>Vues vidéo</td><td>1 000</td><td>500</td></tr>
            <tr><td>Vues vidéo</td><td>5 000</td><td>2 000</td></tr>
            <tr><td>Vues vidéo</td><td>10 000</td><td>3 000</td></tr>
            <tr><td>Commentaires</td><td>10</td><td>300</td></tr>
            <tr><td>Commentaires</td><td>1 000</td><td>3 000</td></tr>
            <tr><td>Vues story</td><td>1 000</td><td>500</td></tr>
            <tr><td>Vues story</td><td>5 000</td><td>2 000</td></tr>
            <tr><td>Vues story</td><td>10 000</td><td>4 000</td></tr>
          </tbody>
        </table>
      </div>
      <!-- YouTube -->
      <div class="tarif-section">
        <h3>YouTube</h3>
        <table>
          <thead><tr><th>Service</th><th>Quantité</th><th>Prix (FCFA)</th></tr></thead>
          <tbody>
            <tr><td>Abonnés</td><td>1 000</td><td>5 000</td></tr>
            <tr><td>Abonnés</td><td>2 000</td><td>9 500</td></tr>
            <tr><td>Abonnés</td><td>5 000</td><td>24 500</td></tr>
            <tr><td>Abonnés</td><td>10 000</td><td>50 000</td></tr>
            <tr><td>Vues/J’aime</td><td>1 000</td><td>1 500</td></tr>
            <tr><td>Vues/J’aime</td><td>2 000</td><td>3 000</td></tr>
            <tr><td>Vues/J’aime</td><td>5 000</td><td>7 000</td></tr>
            <tr><td>Vues/J’aime</td><td>10 000</td><td>13 500</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Personnaliser sous tarifs -->
    <div style="text-align:center; margin-top:15px;">
      <button class="btn btn-secondary toggle-form">Personnaliser votre commande</button>
      <div class="custom-order">
        <label>Plateforme :
          <select class="co-platform"><option>Facebook</option><option>TikTok</option><option>Instagram</option><option>YouTube</option></select>
        </label>
        <label>Service : <select class="co-service"></select></label>
        <label>Quantité : <input type="number" class="co-quantity"></label>
        <label>Lien : <input type="text" class="co-link"></label>
        <p class="price-estimate"></p>
        <button class="co-send">Acheter</button>
      </div>
    </div>
  </section>

  <!-- INSCRIPTION / CONNEXION -->
  <section id="inscription" class="form-container">
    <h3 style="text-align:center;">Créer un compte ou se connecter</h3>
    <form id="registerForm">
      <input type="text" placeholder="Nom" required>
      <input type="text" placeholder="Prénom" required>
      <input type="email" placeholder="Adresse e‑mail" required>
      <input type="date" placeholder="Date de naissance" required>
      <input type="text" placeholder="Pays" required>
      <input type="password" placeholder="Mot de passe" required>
      <button type="submit" class="btn-form">S'inscrire</button>
    </form>
    <form id="loginForm" style="margin-top:20px;">
      <input type="email" placeholder="E‑mail" required>
      <input type="password" placeholder="Mot de passe" required>
      <button type="submit" class="btn-form">Se connecter</button>
    </form>
  </section>

  <!-- PAGE MON PROFIL -->
  <div id="profile-page">
    <img id="profile-pic-default" src="img/IMG/default-avatar.png" alt="Avatar">
    <div class="info"><span>Nom :</span> <span id="info-name"></span></div>
    <div class="info"><span>E‑mail :</span> <span id="info-email"></span></div>
    <button id="btn-edit-profile" class="btn-secondary">Modifier mon profil</button>
    <form id="edit-profile-form" class="edit-form">
      <label>Nom : <input type="text" id="profile-name"></label>
      <label>Téléphone : <input type="text" id="profile-phone"></label>
      <label>Photo : <input type="file" id="profile-image"></label>
      <button type="button" id="save-profile" class="btn">Enregistrer</button>
      <button type="button" id="cancel-edit" class="btn-secondary">Annuler</button>
    </form>
  </div>

  <!-- PAGE MES COMMANDES -->
  <div id="orders-page">
    <h2>Mes commandes</h2>
    <table id="orders-table">
      <thead>
        <tr><th>Date</th><th>Heure</th><th>Plateforme</th><th>Service</th><th>Quantité</th><th>Lien</th><th>Payé</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- À PROPOS -->
  <section id="a-propos">
    <h2>Pourquoi choisir Social Boost Horizon ?</h2>
    <ul>
      <li>Expertise & professionnalisme</li>
      <li>Approche personnalisée</li>
      <li>Accompagnement complet</li>
      <li>Résultats mesurables</li>
      <li>Tarifs compétitifs</li>
    </ul>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>Suivez-nous :
      <a href="https://www.facebook.com/profile.php?id=61574589563101" target="_blank">Facebook</a> |
      <a href="https://www.tiktok.com/@mc.exau0" target="_blank">TikTok</a> |
      <a href="https://www.instagram.com/mc.exau" target="_blank">Instagram</a> |
      <a href="mailto:contact@socialboostehorizon.com">contact@socialboostehorizon.com</a>
    </p>
    <p>© 2025 Social Boost Horizon | Napopolo Exaucé</p>
  </footer>

  <!-- DB TEST OUTPUT -->
  <div id="output" style="background:#eee;padding:10px;margin:20px;"></div>

  <!-- SCRIPT PRINCIPAL (ESM) -->
  <script type="module">
    // 1) Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-analytics.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged }
      from "https://www.gstatic.com/firebasejs/11.6.0/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc, updateDoc, collection, addDoc, query, where, orderBy, getDocs }
      from "https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore.js";
    import { getStorage, ref, uploadBytes, getDownloadURL }
      from "https://www.gstatic.com/firebasejs/11.6.0/firebase-storage.js";

    // 2) Config Firebase
    const firebaseConfig = {
      apiKey:            "AIzaSyBvVXfiFmnIVEZzaugsxt43ov0YU7quIhY",
      authDomain:        "monsiteweb-beaee.firebaseapp.com",
      databaseURL:       "https://monsiteweb-beaee-default-rtdb.firebaseio.com",
      projectId:         "monsiteweb-beaee",
      storageBucket:     "monsiteweb-beaee.appspot.com",
      messagingSenderId: "847850292961",
      appId:             "1:847850292961:web:fab966f77e3a512cc119a0",
      measurementId:     "G-4FD3J9HRSQ"
    };
    const app       = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth      = getAuth(app);
    window.auth     = auth;
    const db        = getFirestore(app);
    const storage   = getStorage(app);

    // 3) Inscription
    document.getElementById('registerForm').addEventListener('submit', async e => {
      e.preventDefault();
      const f = e.target.elements;
      try {
        const uc = await createUserWithEmailAndPassword(auth, f[2].value, f[5].value);
        await setDoc(doc(db,'users',uc.user.uid), { email:f[2].value, name:"", phone:"", profileImageUrl:"" });
        alert("Inscription réussie");
      } catch(err) { alert("Erreur inscription: "+err.message); }
    });

    // 4) Connexion
    document.getElementById('loginForm').addEventListener('submit', async e => {
      e.preventDefault();
      const f = e.target.elements;
      try {
        await signInWithEmailAndPassword(auth, f[0].value, f[1].value);
        alert("Connexion réussie");
      } catch(err) { alert("Erreur connexion: "+err.message); }
    });

    // 5) Navigation & états
    function scrollToTop(){ window.scrollTo({top:0,behavior:'smooth'}); closeMenu(); }
    function closeMenu(){ document.getElementById('nav-menu').style.display='none'; }
    document.getElementById('hamburger-btn').onclick = () => {
      const m = document.getElementById('nav-menu');
      m.style.display = m.style.display==='block'?'none':'block';
    };

    function hideAll(){
      document.getElementById('inscription').style.display='none';
      document.querySelectorAll('section, .banner, .testimonial').forEach(el=>el.style.display='none');
      document.getElementById('profile-page').style.display='none';
      document.getElementById('orders-page').style.display='none';
    }

    onAuthStateChanged(auth,user=>{
      if(user){
        hideAll();
        document.querySelectorAll('section, .banner, .testimonial').forEach(el=>el.style.display='block');
        document.getElementById('inscription').style.display='none';
      } else {
        hideAll();
        document.querySelectorAll('section, .banner, .testimonial').forEach(el=>el.style.display='block');
        document.getElementById('inscription').style.display='block';
      }
    });

    // 6) Profil
    function openProfile(){
      hideAll();
      document.getElementById('profile-page').style.display='block';
      loadProfile();
    }
    window.openProfile = openProfile;

    async function loadProfile(){
      const user = auth.currentUser;
      if(!user) return alert("Connectez-vous d'abord");
      const snap = await getDoc(doc(db,'users',user.uid));
      document.getElementById('info-name').textContent  = snap.data()?.name || "";
      document.getElementById('info-email').textContent = user.email;
      if(snap.data()?.profileImageUrl){
        document.getElementById('profile-pic-default').src = snap.data().profileImageUrl;
      }
    }

    document.getElementById('btn-edit-profile').onclick = ()=>{
      document.getElementById('edit-profile-form').style.display='block';
    };
    document.getElementById('cancel-edit').onclick = ()=>{
      document.getElementById('edit-profile-form').style.display='none';
    };
    document.getElementById('save-profile').onclick = async ()=>{
      const user = auth.currentUser;
      if(!user) return alert("Non connecté");
      const name  = document.getElementById('profile-name').value;
      const phone = document.getElementById('profile-phone').value;
      const file  = document.getElementById('profile-image').files[0];
      const udoc  = doc(db,'users',user.uid);
      try {
        if(file){
          const r   = ref(storage,`profileImages/${user.uid}.jpg`);
          const up  = await uploadBytes(r,file);
          const url = await getDownloadURL(up.ref);
          await updateDoc(udoc,{ name,phone,profileImageUrl:url });
        } else {
          await updateDoc(udoc,{ name,phone });
        }
        alert("Profil mis à jour");
        document.getElementById('edit-profile-form').style.display='none';
        loadProfile();
      } catch(err){ alert("Erreur maj: "+err.message); }
    };

    // 7) Mes commandes
    window.openOrders = async function openOrders(){
      const user = auth.currentUser;
      if(!user) return alert("Connectez-vous d'abord");
      hideAll();
      document.getElementById('orders-page').style.display='block';
      const q = query(collection(db,'orders'), where('userId','==',user.uid), orderBy('timestamp','desc'));
      const snap = await getDocs(q);
      const tbody = document.getElementById('orders-table').querySelector('tbody');
      tbody.innerHTML = '';
      snap.forEach(docSnap=>{
        const d = docSnap.data();
        const dt = new Date(d.timestamp);
        const date = dt.toLocaleDateString();
        const time = dt.toLocaleTimeString();
        const row = `<tr>
          <td>${date}</td><td>${time}</td><td>${d.platform}</td>
          <td>${d.service}</td><td>${d.quantity}</td>
          <td><a href="${d.link||'#'}" target="_blank">Lien</a></td>
          <td>${d.paid}</td>
        </tr>`;
        tbody.insertAdjacentHTML('beforeend',row);
      });
    };

    // 8) Commandes & stockage
    const pricingFB = {
      Followers:{1000:2100,5000:9500,10000:19200},
      "Likes/Vues":{1000:1500,5000:6500,10000:11500},
      "J’aime page":{1000:2800,5000:7000,10000:11000},
      Commentaires:{10:850},
      Partages:{1000:800,5000:4000,10000:9000},
      "Membres groupe":{1000:2000,5000:9000}
    };

    (()=>{
      const form = document.querySelector('.service[data-service="facebook"] .custom-order');
      const serv = form.querySelector('.co-service-fb');
      const qty  = form.querySelector('.co-quantity-fb');
      const pe   = form.querySelector('.price-estimate-fb');
      const btn  = form.querySelector('.co-send-fb');
      serv.onchange = update; qty.oninput = update;
      function update(){
        const pr = pricingFB[serv.value]?.[qty.value];
        pe.textContent = pr?`Prix estimé : ${pr} FCFA`:'Quantité indisponible';
      }
      update();
      btn.onclick = async ()=>{
        const user = auth.currentUser;
        if(!user) return alert("Connectez-vous");
        if(!qty.value) return alert("Quantité ?");
        const cmd = {
          userId:user.uid, platform:'Facebook', service:serv.value,
          quantity:parseInt(qty.value), link:'', timestamp:Date.now(), paid:'Non Payé'
        };
        if(confirm("Enregistrer cette commande ?")){
          await addDoc(collection(db,'orders'),cmd);
          alert("Commande enregistrée");
        }
        const msg = `Je commande ${qty.value} ${serv.value} sur Facebook.`;
        window.open(`https://wa.me/237699853665?text=${encodeURIComponent(msg)}`,'_blank');
      };
    })();

    document.querySelectorAll('.custom-order').forEach(form=>{
      if(form.querySelector('.co-send-fb')) return;
      const btn = form.querySelector('.co-send');
      btn.onclick = async ()=>{
        const user = auth.currentUser;
        if(!user) return alert("Connectez-vous");
        let data = { userId:user.uid, timestamp:Date.now(), paid:'Non Payé' };
        let msg  = "Nouvelle commande:\n";
        form.querySelectorAll('input,textarea,select').forEach(f=>{
          const lbl = f.parentElement.tagName==='LABEL'
            ? f.parentElement.firstChild.textContent.trim()
            : f.placeholder||'';
          data[lbl.replace(/\s/g,'_').toLowerCase()] = f.value;
          msg += `${lbl}: ${f.value}\n`;
        });
        if(confirm("Enregistrer cette commande ?")){
          await addDoc(collection(db,'orders'),data);
          alert("Commande enregistrée");
        }
        window.open(`https://wa.me/237699853665?text=${encodeURIComponent(msg)}`,'_blank');
      };
    });

    // 9) Recherche
    document.getElementById('site-search').oninput = e=>{
      const q = e.target.value.toLowerCase();
      document.querySelectorAll('section, .banner, .testimonial').forEach(el=>
        el.style.display = (!q||el.innerText.toLowerCase().includes(q))?'':'none'
      );
    };
  </script>
</body>
</html>